# Default values for todo-app
# This is a YAML-formatted file.
# For development/Minikube deployment, use dev-values.yaml instead.

# Global configuration
global:
  registry: docker.io/yourorg
  kafka:
    bootstrap: "my-cluster-kafka-bootstrap.kafka.svc.cluster.local:9092"
    pubsub: "kafka-pubsub"
  ingress:
    enabled: true
    className: "nginx"
    hosts:
      app: "app.example.com"
      api: "api.example.com"
    tls: []

# Number of replicas
replicaCount: 2

# Image pull secrets
imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

# Service configurations
services:
  frontend:
    type: ClusterIP
    port: 3000
    image: "docker.io/yourorg/nextjs-frontend:latest"
    resources:
      requests:
        cpu: "200m"
        memory: "256Mi"
      limits:
        cpu: "1000m"
        memory: "512Mi"

  backend:
    type: ClusterIP
    port: 8000
    image: "docker.io/yourorg/fastapi-backend:latest"
    resources:
      requests:
        cpu: "500m"
        memory: "512Mi"
      limits:
        cpu: "2000m"
        memory: "2Gi"

  notification:
    type: ClusterIP
    port: 8000
    image: "docker.io/yourorg/notification-service:latest"
    resources:
      requests:
        cpu: "200m"
        memory: "256Mi"
      limits:
        cpu: "1000m"
        memory: "1Gi"

  recurring:
    type: ClusterIP
    port: 8000
    image: "docker.io/yourorg/recurring-task-service:latest"
    resources:
      requests:
        cpu: "200m"
        memory: "256Mi"
      limits:
        cpu: "1000m"
        memory: "1Gi"

  audit:
    type: ClusterIP
    port: 8000
    image: "docker.io/yourorg/audit-log-service:latest"
    resources:
      requests:
        cpu: "200m"
        memory: "256Mi"
      limits:
        cpu: "1000m"
        memory: "1Gi"

# Dapr configuration
dapr:
  enabled: true

# Autoscaling
autoscaling:
  enabled: true
  minReplicas: 2
  maxReplicas: 10
  targetCPUUtilizationPercentage: 70

# Monitoring configuration
monitoring:
  enabled: true

# PostgreSQL dependency (Bitnami chart)
postgresql:
  enabled: true
  auth:
    username: postgres
    password: ""  # Set via --set
    database: todo_db
  primary:
    resources:
      requests:
        cpu: 500m
        memory: 1Gi
      limits:
        cpu: 2000m
        memory: 2Gi

# Redis dependency (Bitnami chart)
redis:
  enabled: true
  auth:
    enabled: true
    password: ""  # Set via --set
  master:
    resources:
      requests:
        cpu: 100m
        memory: 256Mi
      limits:
        cpu: 500m
        memory: 512Mi

# Kafka dependency (Bitnami chart)
kafka:
  enabled: true
  replicaCount: 3
  resources:
    requests:
      cpu: 500m
      memory: 1Gi
    limits:
      cpu: 2000m
      memory: 2Gi
